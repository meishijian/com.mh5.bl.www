(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba18dc3e"],{"57fe":function(e,t,r){},"96cf":function(e,t,r){var a=function(e){"use strict";var t,r=Object.prototype,a=r.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(e,t,r,a){var n=t&&t.prototype instanceof m?t:m,o=Object.create(n.prototype),i=new $(a||[]);return o._invoke=k(e,r,i),o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(a){return{type:"throw",arg:a}}}e.wrap=c;var d="suspendedStart",u="suspendedYield",h="executing",p="completed",f={};function m(){}function g(){}function v(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,y=w&&w(w(U([])));y&&y!==r&&a.call(y,o)&&(b=y);var _=v.prototype=m.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function F(e){function t(r,n,o,i){var s=l(e[r],e,n);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"===typeof d&&a.call(d,"__await")?Promise.resolve(d.__await).then((function(e){t("next",e,o,i)}),(function(e){t("throw",e,o,i)})):Promise.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return t("throw",e,o,i)}))}i(s.arg)}var r;function n(e,a){function n(){return new Promise((function(r,n){t(e,a,r,n)}))}return r=r?r.then(n,n):n()}this._invoke=n}function k(e,t,r){var a=d;return function(n,o){if(a===h)throw new Error("Generator is already running");if(a===p){if("throw"===n)throw o;return I()}r.method=n,r.arg=o;while(1){var i=r.delegate;if(i){var s=S(i,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=h;var c=l(e,t,r);if("normal"===c.type){if(a=r.done?p:u,c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=p,r.method="throw",r.arg=c.arg)}}}function S(e,r){var a=e.iterator[r.method];if(a===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(a,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function U(e){if(e){var r=e[o];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){while(++n<e.length)if(a.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=_.constructor=v,v.constructor=g,v[s]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(F.prototype),F.prototype[i]=function(){return this},e.AsyncIterator=F,e.async=function(t,r,a,n){var o=new F(c(t,r,a,n));return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),_[s]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var a=t.pop();if(a in e)return r.value=a,r.done=!1,r}return r.done=!0,r}},e.values=U,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(a,n){return s.type="throw",s.arg=e,r.next=a,n&&(r.method="next",r.arg=t),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var n=a.arg;L(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,a){return this.delegate={iterator:U(e),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=a}catch(n){Function("r","regeneratorRuntime = r")(a)}},a434:function(e,t,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),i=r("50c4"),s=r("7b0b"),c=r("65f0"),l=r("8418"),d=r("1dde"),u=Math.max,h=Math.min,p=9007199254740991,f="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d("splice")},{splice:function(e,t){var r,a,d,m,g,v,b=s(this),w=i(b.length),y=n(e,w),_=arguments.length;if(0===_?r=a=0:1===_?(r=0,a=w-y):(r=_-2,a=h(u(o(t),0),w-y)),w+r-a>p)throw TypeError(f);for(d=c(b,a),m=0;m<a;m++)g=y+m,g in b&&l(d,m,b[g]);if(d.length=a,r<a){for(m=y;m<w-a;m++)g=m+a,v=m+r,g in b?b[v]=b[g]:delete b[v];for(m=w;m>w-a+r;m--)delete b[m-1]}else if(r>a)for(m=w-a;m>y;m--)g=m+a-1,v=m+r-1,g in b?b[v]=b[g]:delete b[v];for(m=0;m<r;m++)b[m+y]=arguments[m+2];return b.length=w-a+r,d}})},c740:function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").findIndex,o=r("44d2"),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)},ec35:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"goods_add"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/goodslist"}}},[e._v("商品列表")]),r("el-breadcrumb-item",[e._v("修改商品")])],1),r("el-card",[r("el-alert",{attrs:{title:"修改商品信息",type:"info",center:"","show-icon":"",closable:!1}}),r("el-steps",{attrs:{active:e.activeName-0,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"商品基本信息"}}),r("el-step",{attrs:{title:"商品选择分类"}}),r("el-step",{attrs:{title:"商品封面图片"}}),r("el-step",{attrs:{title:"商品图片轮播"}}),r("el-step",{attrs:{title:"商品详情图片"}}),r("el-step",{attrs:{title:"完成"}})],1),r("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px","label-position":"top"}},[r("el-tabs",{attrs:{tabPosition:"left","before-leave":e.beforeTabHandleClick},on:{"tab-click":e.tabHandleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"商品基本信息",name:"0"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:e.addForm.goods_name,callback:function(t){e.$set(e.addForm,"goods_name",t)},expression:"addForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[r("el-input",{attrs:{type:"number",min:"0.1"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"stock"}},[r("el-input",{attrs:{type:"number",min:"1"},model:{value:e.addForm.stock,callback:function(t){e.$set(e.addForm,"stock",t)},expression:"addForm.stock"}})],1)],1),r("el-tab-pane",{attrs:{label:"商品选择分类",name:"1"}},[r("el-form-item",{attrs:{label:"商品分类",prop:"cat_id"}},[r("el-cascader",{attrs:{options:e.cascaderData,props:e.cascaderDataProps},on:{change:e.cascaderDataChange},model:{value:e.catIds,callback:function(t){e.catIds=t},expression:"catIds"}})],1),r("el-form-item",{attrs:{label:"商品店铺",prop:"brand_id"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.brand_id,callback:function(t){e.$set(e.addForm,"brand_id",t)},expression:"addForm.brand_id"}},e._l(e.brandData,(function(e){return r("el-option",{key:e.id,attrs:{label:e.bra_name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"服务类型",prop:"service"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.service,callback:function(t){e.$set(e.addForm,"service",t)},expression:"addForm.service"}},e._l(e.serviceData,(function(e){return r("el-option",{key:e.id,attrs:{label:e.ser_name,value:e.value}})})),1)],1)],1),r("el-tab-pane",{attrs:{label:"商品封面图片",name:"2"}},[r("el-button",{attrs:{size:"medium",type:"warning"},on:{click:e.getImageShow}},[e._v("上 传 封 面 图 片")]),r("my-upload",{attrs:{width:115,height:115,"img-format":"png",size:e.size,langType:"zh",noRotate:!1,noSquare:!0,noCircle:!0,field:"file",url:e.uploadURL,headers:e.headersObj},on:{"crop-upload-success":e.imageUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.imageShow,callback:function(t){e.imageShow=t},expression:"imageShow"}}),r("br"),r("br"),r("el-image",{attrs:{src:e.imageDataUrl}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),r("el-tab-pane",{attrs:{label:"商品图片轮播",name:"3"}},[r("el-button",{attrs:{size:"medium",type:"warning"},on:{click:e.getSwipeShow}},[e._v("上 传 轮 播 图 片")]),r("my-upload",{attrs:{width:375,height:375,"img-format":"png",size:e.size,langType:"zh",noRotate:!1,noSquare:!0,noCircle:!0,field:"file",url:e.uploadURL,headers:e.headersObj},on:{"crop-upload-success":e.swipeUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.swipeShow,callback:function(t){e.swipeShow=t},expression:"swipeShow"}}),r("br"),r("br"),e._l(e.swipeDataUrl,(function(t,a){return r("div",{key:a,staticClass:"swpie_div"},[r("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.swipeDelete(a)}}}),r("el-image",{staticClass:"swipeImage",attrs:{src:t}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1)}))],2),r("el-tab-pane",{attrs:{label:"商品详情图片",name:"4"}},[r("el-button",{attrs:{size:"medium",type:"warning"},on:{click:e.getDetailsShow}},[e._v("上 传 详 情 图 片")]),r("my-upload",{attrs:{width:560,height:750,"img-format":"png",size:e.size,langType:"zh",noRotate:!1,noSquare:!0,noCircle:!0,field:"file",url:e.uploadURL,headers:e.headersObj},on:{"crop-upload-success":e.detailsUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.detailsShow,callback:function(t){e.detailsShow=t},expression:"detailsShow"}}),r("br"),r("br"),e._l(e.detailsDataUrl,(function(t,a){return r("div",{key:a,staticClass:"details_div"},[r("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.detailsDelete(a)}}}),r("el-image",{staticClass:"detailsImage",attrs:{src:t}},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1)}))],2),r("el-tab-pane",{attrs:{label:"完成",name:"5"}},[r("el-button",{staticClass:"buttonAdd",attrs:{type:"primary"},on:{click:e.commodityAdd}},[e._v("修改商品")])],1)],1)],1)],1)],1)},n=[],o=(r("99af"),r("c740"),r("c975"),r("a434"),r("d3b7"),r("96cf"),r("db4d"),r("0b4d")),i=r("db49"),s={data:function(){return{id:this.$route.params.id,detailsDataUrl:[],detailsShow:!1,swipeDataUrl:[],swipeShow:!1,imageDataUrl:"",imageShow:!1,size:2.1,uploadURL:i["a"],headersObj:{Authorization:sessionStorage.getItem("token")},activeName:"0",serviceData:[],brandData:[],catIds:[],cascaderData:[],cascaderDataProps:{label:"cla_name",value:"id",children:"children"},addForm:{goods_name:"",price:"",stock:"",cat_id:"",brand_id:"",service:"",image:"",goods_swipe:[],goods_details:[]},addFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],stock:[{required:!0,message:"请输入商品数量",trigger:"blur"}]}}},components:{"my-upload":o["a"]},created:function(){var e=this;this.$http.get("/goods_get/"+this.id).then((function(t){if(200!==t.data.code)return e.$message.error("回显数据失败");for(var r in e.addForm=t.data.data,e.imageDataUrl=-1!=t.data.data.image.indexOf("https://img")?t.data.data.image:"".concat(i["b"]).concat(t.data.data.image),e.catIds=t.data.data.cat_id,e.addForm.cat_id=t.data.data.cat_id[t.data.data.cat_id.length-1],e.addForm.goods_details)e.detailsDataUrl[r]=-1!=e.addForm.goods_details[r].indexOf("https://img")?e.addForm.goods_details[r]:"".concat(i["b"]).concat(e.addForm.goods_details[r]);for(var a in e.addForm.goods_swipe)e.swipeDataUrl[a]=-1!=e.addForm.goods_swipe[a].indexOf("https://img")?e.addForm.goods_swipe[a]:"".concat(i["b"]).concat(e.addForm.goods_swipe[a])}))},methods:{detailsDelete:function(e){var t=this.addForm.goods_details.findIndex((function(t,r){return r===e}));this.addForm.goods_details.splice(t,1);var r=this.detailsDataUrl.findIndex((function(t,r){return r===e}));this.detailsDataUrl.splice(r,1)},getDetailsShow:function(){this.detailsShow=!this.detailsShow},detailsUploadSuccess:function(e,t){if(200!==e.code)return this.$message.error("上传失败，请重试");this.detailsDataUrl.push(i["b"]+e.file),this.addForm.goods_details.push(e.file)},swipeDelete:function(e){var t=this.addForm.goods_swipe.findIndex((function(t,r){return r===e}));this.addForm.goods_swipe.splice(t,1);var r=this.swipeDataUrl.findIndex((function(t,r){return r===e}));this.swipeDataUrl.splice(r,1)},getSwipeShow:function(){this.swipeShow=!this.swipeShow},swipeUploadSuccess:function(e,t){if(200!==e.code)return this.$message.error("上传失败，请重试");this.swipeDataUrl.push(i["b"]+e.file),this.addForm.goods_swipe.push(e.file)},getImageShow:function(){this.imageShow=!this.imageShow},imageUploadSuccess:function(e,t){if(200!==e.code)return this.$message.error("上传失败，请重试");this.imageDataUrl=i["b"]+e.file,this.addForm.image=e.file},cropUploadFail:function(e,t){this.$message.error("上传失败，请重试")},cascaderDataChange:function(){3!==this.catIds.length&&(this.catIds=[])},beforeTabHandleClick:function(e,t){},tabHandleClick:function(){"1"===this.activeName&&(this.getCatData(),this.getBrandData(),this.getServiceData())},getCatData:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$http.get("/goods_classify"));case 2:if(e=r.sent,t=e.data,200===t.code){r.next=6;break}return r.abrupt("return",this.$message.error("获取分类失败"));case 6:this.cascaderData=t.data;case 7:case"end":return r.stop()}}),null,this)},getBrandData:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$http.get("/goods_list_brand"));case 2:if(e=r.sent,t=e.data,200===t.code){r.next=6;break}return r.abrupt("return",this.$message.error("获取店铺失败"));case 6:this.brandData=t.data;case 7:case"end":return r.stop()}}),null,this)},getServiceData:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.$http.get("/goods_list_service"));case 2:if(e=r.sent,t=e.data,200===t.code){r.next=6;break}return r.abrupt("return",this.$message.error("获取服务类型失败"));case 6:this.serviceData=t.data;case 7:case"end":return r.stop()}}),null,this)},commodityAdd:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.addFormRef.validate((function(t){var r,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",e.$message.error("请完善 商品基本信息 在添加!"));case 2:if(3===e.catIds.length){n.next=7;break}return e.$message.error("请选择商品分类！"),n.abrupt("return",!1);case 7:e.addForm.cat_id=e.catIds[e.catIds.length-1];case 8:if(""!==e.addForm.brand_id){n.next=11;break}return e.$message.error("请选择商品店铺！"),n.abrupt("return",!1);case 11:if(""!==e.addForm.service){n.next=14;break}return e.$message.error("请选择服务类型！"),n.abrupt("return",!1);case 14:if(""!==e.addForm.image){n.next=17;break}return e.$message.error("请选择商品封面图片！"),n.abrupt("return",!1);case 17:if(0!==e.addForm.goods_swipe.length){n.next=20;break}return e.$message.error("请选择商品轮播图片！"),n.abrupt("return",!1);case 20:if(0!==e.addForm.goods_details.length){n.next=23;break}return e.$message.error("请选择商品详情图片！"),n.abrupt("return",!1);case 23:return n.next=25,regeneratorRuntime.awrap(e.$http.put("/goods_list",e.addForm));case 25:if(r=n.sent,a=r.data,200===a.code){n.next=29;break}return n.abrupt("return",e.$message.error(a.error));case 29:e.$message.success(a.message),e.$router.push("/goodslist");case 31:case"end":return n.stop()}}))}));case 1:case"end":return t.stop()}}),null,this)}}},c=s,l=(r("fa74"),r("2877")),d=Object(l["a"])(c,a,n,!1,null,null,null);t["default"]=d.exports},fa74:function(e,t,r){"use strict";var a=r("57fe"),n=r.n(a);n.a}}]);
//# sourceMappingURL=chunk-ba18dc3e.60908e7f.js.map