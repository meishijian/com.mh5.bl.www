(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c438640"],{4680:function(t,a,o){},5387:function(t,a,o){"use strict";var n=o("4680"),r=o.n(n);r.a},a15b:function(t,a,o){"use strict";var n=o("23e7"),r=o("44ad"),i=o("fc6a"),e=o("b301"),s=[].join,c=r!=Object,l=e("join",",");n({target:"Array",proto:!0,forced:c||l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},a434:function(t,a,o){"use strict";var n=o("23e7"),r=o("23cb"),i=o("a691"),e=o("50c4"),s=o("7b0b"),c=o("65f0"),l=o("8418"),d=o("1dde"),u=Math.max,h=Math.min,f=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d("splice")},{splice:function(t,a){var o,n,d,p,b,v,m=s(this),_=e(m.length),w=r(t,_),y=arguments.length;if(0===y?o=n=0:1===y?(o=0,n=_-w):(o=y-2,n=h(u(i(a),0),_-w)),_+o-n>f)throw TypeError(g);for(d=c(m,n),p=0;p<n;p++)b=w+p,b in m&&l(d,p,m[b]);if(d.length=n,o<n){for(p=w;p<_-n;p++)b=p+n,v=p+o,b in m?m[v]=m[b]:delete m[v];for(p=_;p>_-n+o;p--)delete m[p-1]}else if(o>n)for(p=_-n;p>w;p--)b=p+n-1,v=p+o-1,b in m?m[v]=m[b]:delete m[v];for(p=0;p<o;p++)m[p+w]=arguments[p+2];return m.length=_-n+o,d}})},b0c0:function(t,a,o){var n=o("83ab"),r=o("9bf2").f,i=Function.prototype,e=i.toString,s=/^\s*function ([^ (]*)/,c="name";!n||c in i||r(i,c,{configurable:!0,get:function(){try{return e.call(this).match(s)[1]}catch(t){return""}}})},c740:function(t,a,o){"use strict";var n=o("23e7"),r=o("b727").findIndex,i=o("44d2"),e="findIndex",s=!0;e in[]&&Array(1)[e]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(e)},cf2a:function(t,a,o){"use strict";o.r(a);var n=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"order"},[o("div",{staticClass:"order_margin"},[o("van-nav-bar",{staticClass:"left_shop",attrs:{"left-arrow":"",title:"确认订单"},on:{"click-left":t.onClickLeft}},[o("div",{attrs:{slot:"right"},slot:"right"},[t.icon?o("van-icon",{attrs:{name:"cross",color:"#666666",size:"25px"},on:{click:function(a){t.icon=!t.icon}}}):o("van-icon",{attrs:{name:"ellipsis",color:"#666666",size:"25px"},on:{click:function(a){t.icon=!t.icon}}})],1)]),o("div",{staticClass:"dahang"},[1==t.icon?o("van-tabbar",{staticClass:"dahang_tabbar",attrs:{fixed:!1}},[o("van-tabbar-item",{attrs:{icon:"home-o",to:"/"}},[t._v("首页")]),o("van-tabbar-item",{attrs:{icon:"search",to:"/search"}},[t._v("搜索")]),o("van-tabbar-item",{attrs:{icon:"bars",to:"/class"}},[t._v("分类")]),o("van-tabbar-item",{attrs:{icon:"shopping-cart-o",to:"/shopping"}},[t._v("购物车")]),o("van-tabbar-item",{attrs:{icon:"contact",to:"/me"}},[t._v("我的i百联")])],1):t._e()],1),o("van-contact-card",{attrs:{type:t.cardType,name:t.currentContact.name,tel:t.currentContact.tel},on:{click:t.order}}),o("van-cell",{attrs:{title:"支付方式","is-link":""},on:{click:function(a){t.show=!t.show}}}),o("van-action-sheet",{attrs:{"cancel-text":"取消"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[o("van-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[o("van-cell-group",[o("van-cell",{attrs:{title:"在线支付",clickable:""},on:{click:function(a){t.radio="1"}}},[o("van-radio",{attrs:{slot:"right-icon",name:"1"},slot:"right-icon"})],1),o("van-cell",{attrs:{title:"货到付款",clickable:""},on:{click:function(a){t.radio="2"}}},[o("van-radio",{attrs:{slot:"right-icon",name:"2"},slot:"right-icon"})],1)],1)],1)],1),o("van-grid",t._l(t.goodsData,(function(a,n){return o("van-card",{key:n,attrs:{price:a.price,title:a.goods_name.slice(0,20),thumb:a.image}},[o("div",{attrs:{slot:"footer"},slot:"footer"},[o("p",{staticClass:"shu"},[t._v("×"+t._s(t.cart[a.id].count))]),o("p",{staticClass:"mian"},[t._v("免邮")]),o("hr",{staticClass:"hr"}),o("p",[t._v(" 合计: "),o("span",{staticClass:"qian"},[t._v("￥"+t._s(a.price*t.cart[a.id].count))])])]),o("div",{attrs:{slot:"tags"},slot:"tags"},[o("p",{staticClass:"qitian1"},[t._v("七天无理由退换货")])])])})),1),o("van-nav-bar",{staticClass:"submit",attrs:{"left-text":"配送方式"}},[o("van-radio-group",{attrs:{slot:"right"},slot:"right",model:{value:t.radios,callback:function(a){t.radios=a},expression:"radios"}},[o("van-radio",{staticClass:"wu",attrs:{name:"1"}},[t._v("物流配送")]),o("van-radio",{staticClass:"men",attrs:{name:"2"}},[t._v("门店自提")])],1)],1)],1),o("van-submit-bar",{staticClass:"submit",attrs:{price:t.totalPrices,"button-text":"提交订单"},on:{submit:t.onSubmit}})],1)},r=[],i=(o("a4d3"),o("4de4"),o("c740"),o("4160"),o("a15b"),o("a434"),o("b0c0"),o("e439"),o("dbb4"),o("b64b"),o("159b"),o("2fa7")),e=o("2f62");function s(t,a){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),o.push.apply(o,n)}return o}function c(t){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?s(o,!0).forEach((function(a){Object(i["a"])(t,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(o).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(o,a))}))}return t}var l={data:function(){return{cart:JSON.parse(localStorage.getItem("cart")),goodsData:[],chosenContactId:null,editingContact:{},showList:!1,showEdit:!1,isEdit:!1,icon:!1,show:!1,radio:"1",radios:"1",list:[{name:"s",tel:"s",id:0}],address:localStorage.getItem("address")||0}},methods:c({},Object(e["b"])(["getInfoData"]),{onClickLeft:function(){window.history.back(-1)},order:function(){this.showList=!0,this.$router.push("/address")},order_shop:function(){var t=this,a=JSON.parse(localStorage.getItem("goods_id")),o=JSON.parse(localStorage.getItem("cart")),n=[];a.forEach((function(t){1==o[t].ischk&&n.push(t)})),this.$http.get("/cart_goods",{params:{goods_id:n.join(",")}}).then((function(a){t.goodsData=a.data.data}))},onSubmit:function(){var t=this;localStorage.setItem("totalPrices",this.totalPrices/100);var a=[];this.goodsData.forEach((function(o,n){a.push({goods_id:o.id,buy_count:t.cart[o.id].count})})),this.$http.post("/orders",{address_id:this.chosenContactId,cart:a}).then((function(a){var o=JSON.parse(localStorage.getItem("goods_id"));t.goodsData.forEach((function(a,n){1==t.cart[a.id].ischk&&(t.cart[a.id]=null),o.splice(o.findIndex((function(t){return a.id==t})),1)})),t.$router.push({path:"/payment",query:{orderId:a.data.data.orderId}}),localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.setItem("goods_id",JSON.stringify(o)),t.getInfoData(o.length)}))},onSelect:function(){this.showList=!1},getList:function(){var t=this;this.$http.get("/address_single",{params:{id:this.address}}).then((function(a){t.list[0].name=a.data.data[0].shr_name,t.list[0].tel=a.data.data[0].mobile,t.list[0].id=a.data.data[0].id,t.chosenContactId=a.data.data[0].id}))}}),computed:{cardType:function(){return null!==this.chosenContactId?"edit":"add"},currentContact:function(){var t=this.chosenContactId;return null!==t?this.list.filter((function(a){return a.id===t}))[0]:{}},totalPrices:function(){var t=this,a=0;return this.goodsData.forEach((function(o){a+=o.price*t.cart[o.id].count})),100*a}},created:function(){this.order_shop(),this.getList()}},d=l,u=(o("5387"),o("2877")),h=Object(u["a"])(d,n,r,!1,null,null,null);a["default"]=h.exports}}]);
//# sourceMappingURL=chunk-0c438640.f490ab99.js.map